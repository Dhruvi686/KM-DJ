<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CEO Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: #f6f7fb;
      color: #222;
    }
    .sidebar {
      width: 240px;
      background: #fff;
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      box-shadow: 2px 0 12px #e0e0e0;
      display: flex;
      flex-direction: column;
      z-index: 10;
    }
    .sidebar h2 {
      font-size: 1.4rem;
      margin: 32px 0 0 32px;
      font-weight: bold;
    }
    .sidebar .subtitle {
      font-size: 1rem;
      color: #888;
      margin: 0 0 24px 32px;
    }
    .sidebar nav {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 24px;
    }
    .sidebar nav a {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 32px;
      color: #222;
      text-decoration: none;
      font-size: 1.08rem;
      border-left: 4px solid transparent;
      transition: background 0.2s, border 0.2s;
    }
    .sidebar nav a.active, .sidebar nav a:hover {
      background: #f0f0f7;
      border-left: 4px solid #4B0082;
      color: #4B0082;
    }
    .main {
      margin-left: 240px;
      padding: 32px 40px 32px 40px;
      min-height: 100vh;
    }
    .dashboard-cards {
      display: flex;
      gap: 24px;
      margin-bottom: 32px;
    }
    .card {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 2px 12px #e0e0e0;
      padding: 24px 32px;
      min-width: 200px;
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
    }
    .card-title {
      font-size: 1.1rem;
      color: #888;
      margin-bottom: 8px;
    }
    .card-value {
      font-size: 2rem;
      font-weight: bold;
      color: #222;
    }
    .announcements {
      background: #fff;
      border-radius: 14px;
      box-shadow: 0 2px 12px #e0e0e0;
      padding: 24px 32px;
      margin-top: 24px;
    }
    .announcements h3 {
      margin-top: 0;
      font-size: 1.2rem;
      margin-bottom: 16px;
    }
    .announcement {
      background: #f6f7fb;
      border-radius: 8px;
      padding: 16px 20px;
      margin-bottom: 12px;
      border-left: 4px solid #4B0082;
    }
    .announcement-title {
      font-weight: bold;
      margin-bottom: 4px;
    }
    .announcement-date {
      color: #888;
      font-size: 0.95em;
      margin-top: 4px;
    }
    @media (max-width: 900px) {
      .main { padding: 16px 4vw; }
      .dashboard-cards { flex-direction: column; gap: 16px; }
      .sidebar { width: 100vw; height: auto; position: static; box-shadow: none; }
      .main { margin-left: 0; }
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <h2>CEO Dashboard</h2>
    <div class="subtitle">Mission Control</div>
    <nav id="sidebarNav">
      <a href="#" class="active" data-section="dashboard"><i class="fas fa-chart-bar"></i> Dashboard</a>
      <a href="#" data-section="users"><i class="fas fa-users"></i> Manage Users</a>
      <a href="#" data-section="teams"><i class="fas fa-layer-group"></i> Manage Teams</a>
      <a href="#" data-section="projects"><i class="fas fa-tasks"></i> Manage Projects</a>
      <a href="#" data-section="announcements"><i class="fas fa-bullhorn"></i> Announcements</a>
    </nav>
  </div>
  <div class="main">
    <section id="dashboardSection">
      <div class="dashboard-cards">
        <div class="card">
          <div class="card-title">Total Teams</div>
          <div class="card-value" id="totalTeams">3</div>
        </div>
        <div class="card">
          <div class="card-title">Active Projects</div>
          <div class="card-value" id="activeProjects">2</div>
          <div style="font-size:0.95em;color:#888;">0 completed</div>
        </div>
        <div class="card">
          <div class="card-title">Total Employees</div>
          <div class="card-value" id="totalEmployees">5</div>
        </div>
        <div class="card">
          <div class="card-title">Pending Tasks</div>
          <div class="card-value" id="pendingTasks">0</div>
        </div>
      </div>
      <div class="announcements">
        <h3>Recent Announcements</h3>
        <div class="announcement">
          <div class="announcement-title">Welcome to the new dashboard!</div>
          <div>We're excited to launch our new CEO dashboard with enhanced features.</div>
          <div class="announcement-date">9/6/2025</div>
        </div>
      </div>
    </section>
    <section id="usersSection" style="display:none">
      <h2>User Management</h2>
      <button id="addUserBtn" style="float:right;margin-bottom:16px;padding:8px 18px;background:#111;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;">+ Add User</button>
      <div style="clear:both"></div>
      <div id="userList" style="background:#fff;border-radius:14px;box-shadow:0 2px 12px #e0e0e0;padding:24px 32px;">
        <div style="margin-bottom:18px;">
          <b>John CEO</b> <span style="color:#4B0082;font-weight:bold;">&#x1F451; CEO</span><br>
          <span style="color:#888;">ceo@company.com</span>
        </div>
        <div style="margin-bottom:18px;">
          <b>Alice Leader</b> <span style="color:#4B0082;font-weight:bold;">&#x1F464; Team Leader</span><br>
          <span style="color:#888;">alice@company.com</span>
        </div>
        <div style="margin-bottom:18px;">
          <b>Bob Employee</b> <span style="color:#4B0082;font-weight:bold;">&#x1F465; Employee</span><br>
          <span style="color:#888;">bob@company.com</span>
        </div>
      </div>
      <!-- Add User Modal -->
      <div id="addUserModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.3);z-index:1000;align-items:center;justify-content:center;">
        <div style="background:#fff;padding:32px 24px 24px 24px;border-radius:16px;max-width:400px;margin:80px auto;box-shadow:0 4px 32px #bbb;position:relative;">
          <button id="closeAddUserModal" style="position:absolute;top:12px;right:12px;background:#111;color:#fff;border:none;border-radius:50%;width:32px;height:32px;font-size:22px;cursor:pointer;">&times;</button>
          <h2 style="text-align:center;margin-bottom:24px;">Create New User</h2>
          <form id="addUserForm" style="display:flex;flex-direction:column;gap:16px;">
            <div>
              <label for="addUserName">Name:</label>
              <input type="text" id="addUserName" required style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ddd;">
            </div>
            <div>
              <label for="addUserEmail">Email:</label>
              <input type="email" id="addUserEmail" required style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ddd;">
            </div>
            <div>
              <label for="addUserRole">Role:</label>
              <select id="addUserRole" required style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ddd;">
                <option value="CEO">CEO</option>
                <option value="Team Leader">Team Leader</option>
                <option value="Employee">Employee</option>
              </select>
            </div>
            <button type="submit" style="width:100%;padding:12px;background:#4B0082;color:#fff;border:none;border-radius:8px;font-size:18px;cursor:pointer;">Create User</button>
          </form>
        </div>
      </div>
    </section>
</style>
<script>
// Sidebar navigation logic
document.addEventListener('DOMContentLoaded', function() {
  const navLinks = document.querySelectorAll('#sidebarNav a');
  const sections = {
    dashboard: document.getElementById('dashboardSection'),
    users: document.getElementById('usersSection'),
    teams: document.getElementById('teamsSection'),
    projects: document.getElementById('projectsSection'),
    announcements: document.getElementById('announcementsSection')
  };
  navLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      navLinks.forEach(l => l.classList.remove('active'));
      this.classList.add('active');
      Object.values(sections).forEach(sec => sec.style.display = 'none');
      const section = sections[this.dataset.section];
      if (section) section.style.display = '';
    });
  });

  // Add User Modal logic
  const addUserBtn = document.getElementById('addUserBtn');
  const addUserModal = document.getElementById('addUserModal');
  const closeAddUserModal = document.getElementById('closeAddUserModal');
  const addUserForm = document.getElementById('addUserForm');
  const userList = document.getElementById('userList');

  addUserBtn.onclick = () => { addUserModal.style.display = 'flex'; };
  closeAddUserModal.onclick = () => { addUserModal.style.display = 'none'; };
  addUserForm.onsubmit = async function(e) {
    e.preventDefault();
    const name = document.getElementById('addUserName').value;
    const email = document.getElementById('addUserEmail').value;
    const role = document.getElementById('addUserRole').value;
    const password = 'default123'; // Or prompt for password
    const res = await fetch('/api/auth/signup', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ name, email, password, role })
    });
    const data = await res.json();
    if (data.success) {
  addUserModal.style.display = 'none';
  addUserForm.reset();
  await loadUsers();
    } else {
      alert(data.message || 'Failed to add user');
    }
  };

  // Fetch and display users
  async function loadUsers() {
    const res = await fetch('/api/auth/users');
    const data = await res.json();
    const userList = document.getElementById('userList');
    userList.innerHTML = '';
    if (data.success) {
      if (data.users.length === 0) {
        userList.innerHTML = '<div style="color:#888;">No users found.</div>';
      } else {
        data.users.forEach(user => {
          let icon = '';
          if (user.role === 'CEO') icon = '&#x1F451;';
          else if (user.role === 'Team Leader') icon = '&#x1F464;';
          else icon = '&#x1F465;';
          const div = document.createElement('div');
          div.style.marginBottom = '18px';
          div.innerHTML = `
            <b>${user.name}</b> <span style="color:#4B0082;font-weight:bold;">${icon} ${user.role}</span><br>
            <span style="color:#888;">${user.email}</span><br>
            <span style="color:#888;font-size:0.95em;">User ID: <b>${user.userId || ''}</b></span><br>
            <select onchange="updateUserRole('${user._id}', this.value)">
              <option value="CEO" ${user.role === 'CEO' ? 'selected' : ''}>CEO</option>
              <option value="Team Leader" ${user.role === 'Team Leader' ? 'selected' : ''}>Team Leader</option>
              <option value="Employee" ${user.role === 'Employee' ? 'selected' : ''}>Employee</option>
            </select>
          `;
          userList.appendChild(div);
        });
      }
    }
  }

  // Update user role
  window.updateUserRole = async function(id, role) {
    const res = await fetch(`/api/auth/user/${id}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ role })
    });
    const data = await res.json();
    if (!data.success) alert(data.message || 'Failed to update role');
    loadUsers();
  };

  // Load users when Manage Users section is shown
  document.querySelector('[data-section=\"users\"]').addEventListener('click', loadUsers);
});
</script>
    <section id="teamsSection" style="display:none">
      <h2>Team Management</h2>
      <button id="createTeamBtn" style="float:right;margin-bottom:16px;padding:8px 18px;background:#111;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;">+ Create Team</button>
      <div style="clear:both"></div>
      <div id="teamList" style="display:flex;gap:24px;flex-wrap:wrap;">
        <div class="card" style="min-width:260px;">
          <b>Development Team</b><br>
          <span style="color:#888;">Main development team for projects</span><br>
          Members: 0<br>
          Leader: Alice Leader
        </div>
        <div class="card" style="min-width:260px;">
          <b>Marketing Team</b><br>
          <span style="color:#888;">Team responsible for marketing campaigns and brand management</span><br>
          Members: 0<br>
          Leader: Not assigned<br>
          Deadline: 2/15/2025
        </div>
        <div class="card" style="min-width:260px;">
          <b>odoo</b><br>
          <span style="color:#888;">odoo</span><br>
          Members: 0<br>
          Leader: kavya
        </div>
      </div>
      <!-- Create Team Modal -->
      <div id="createTeamModal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.3);z-index:1000;align-items:center;justify-content:center;">
        <div style="background:#fff;padding:32px 24px 24px 24px;border-radius:16px;max-width:400px;margin:80px auto;box-shadow:0 4px 32px #bbb;position:relative;">
          <button id="closeCreateTeamModal" style="position:absolute;top:12px;right:12px;background:#111;color:#fff;border:none;border-radius:50%;width:32px;height:32px;font-size:22px;cursor:pointer;">&times;</button>
          <h2 style="text-align:center;margin-bottom:24px;">Create New Team</h2>
          <form id="createTeamForm" style="display:flex;flex-direction:column;gap:16px;">
            <div>
              <label for="teamName">Team Name:</label>
              <input type="text" id="teamName" required style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ddd;">
            </div>
            <div>
              <label for="teamDesc">Description:</label>
              <textarea id="teamDesc" style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ddd;"></textarea>
            </div>
            <div>
              <label for="teamLeader">Leader:</label>
              <input type="text" id="teamLeader" style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ddd;">
            </div>
            <div>
              <label for="teamDeadline">Deadline:</label>
              <input type="date" id="teamDeadline" style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #ddd;">
            </div>
            <button type="submit" style="width:100%;padding:12px;background:#4B0082;color:#fff;border:none;border-radius:8px;font-size:18px;cursor:pointer;">Create Team</button>
          </form>
        </div>
      </div>
    </section>
  <script>
  // Create Team Modal logic
  const createTeamBtn = document.getElementById('createTeamBtn');
  const createTeamModal = document.getElementById('createTeamModal');
  const closeCreateTeamModal = document.getElementById('closeCreateTeamModal');
  const createTeamForm = document.getElementById('createTeamForm');
  const teamList = document.getElementById('teamList');

  createTeamBtn.onclick = () => { createTeamModal.style.display = 'flex'; };
  closeCreateTeamModal.onclick = () => { createTeamModal.style.display = 'none'; };
  createTeamForm.onsubmit = function(e) {
    e.preventDefault();
    const name = document.getElementById('teamName').value;
    const desc = document.getElementById('teamDesc').value;
    const leader = document.getElementById('teamLeader').value || 'Not assigned';
    const deadline = document.getElementById('teamDeadline').value;
    const card = document.createElement('div');
    card.className = 'card';
    card.style.minWidth = '260px';
    card.innerHTML = `<b>${name}</b><br><span style='color:#888;'>${desc}</span><br>Members: 0<br>Leader: ${leader}${deadline ? `<br>Deadline: ${deadline}` : ''}`;
    teamList.appendChild(card);
    createTeamModal.style.display = 'none';
    createTeamForm.reset();
  };
  </script>
    <section id="projectsSection" style="display:none">
      <h2>Project Management</h2>
      <button style="float:right;margin-bottom:16px;padding:8px 18px;background:#111;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;">+ Create Project</button>
      <div style="clear:both"></div>
      <div style="display:flex;gap:24px;flex-wrap:wrap;">
        <div class="card" style="min-width:260px;">
          <b>New Website</b><br>
          <span style="color:#888;">Company website redesign project</span><br>
          Team: Development Team<br>
          Deadline: 10/6/2025<br>
          Budget: $50,000
        </div>
        <div class="card" style="min-width:260px;">
          <b>odoo</b><br>
          <span style="color:#888;">odoo</span><br>
          Team: odoo<br>
          Deadline: 9/9/2025<br>
          Budget: $-3
        </div>
      </div>
    </section>
    <section id="announcementsSection" style="display:none">
      <h2>Announcements</h2>
      <div class="announcements">
        <div class="announcement">
          <div class="announcement-title">Welcome to the new dashboard!</div>
          <div>We're excited to launch our new CEO dashboard with enhanced features.</div>
          <div class="announcement-date">9/6/2025</div>
        </div>
      </div>
    </section>
  </div>
</style>
<script>
// Sidebar navigation logic
document.addEventListener('DOMContentLoaded', function() {
  const navLinks = document.querySelectorAll('#sidebarNav a');
  const sections = {
    dashboard: document.getElementById('dashboardSection'),
    users: document.getElementById('usersSection'),
    teams: document.getElementById('teamsSection'),
    projects: document.getElementById('projectsSection'),
    announcements: document.getElementById('announcementsSection')
  };
  navLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      navLinks.forEach(l => l.classList.remove('active'));
      this.classList.add('active');
      Object.values(sections).forEach(sec => sec.style.display = 'none');
      const section = sections[this.dataset.section];
      if (section) section.style.display = '';
    });
  });
});
</script>
</body>
</html>
